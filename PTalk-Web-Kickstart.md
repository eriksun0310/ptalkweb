# PTalk ç¶²é ç‰ˆé–‹ç™¼å•Ÿå‹•æŒ‡å—

> çµ¦ AI åŠ©æ‰‹ï¼ˆClaudeï¼‰çš„å®Œæ•´å¼•å°æ–‡ä»¶

---

## ğŸ“Œ å°ˆæ¡ˆèƒŒæ™¯

æˆ‘æ­£åœ¨é–‹ç™¼ **PTalk ç¶²é ç‰ˆ**ï¼Œé€™æ˜¯ä¸€å€‹æ¥µç°¡ç‰ˆçš„è©•è«–é è¦½å¹³å°ã€‚

**æ ¸å¿ƒç›®æ¨™ï¼š**
- è®“æœªä¸‹è¼‰ App çš„ç”¨æˆ¶èƒ½æŸ¥çœ‹åˆ†äº«çš„è©•è«–
- å®Œæ•´é¡¯ç¤ºå–®å‰‡è©•è«–ï¼ˆå»ºç«‹ä¿¡ä»»ï¼‰
- å¼•å°ç”¨æˆ¶ä¸‹è¼‰ App

**æŠ€è¡“æ£§ï¼š**
- Next.js 14 (App Router)
- TypeScript
- TailwindCSS
- Feature-Sliced Design æ¶æ§‹

**é‡è¦ï¼šè¨­è¨ˆç³»çµ±å¿…é ˆèˆ‡ React Native App å®Œå…¨ä¸€è‡´**

---

## ğŸ“‚ ç›¸é—œæ–‡ä»¶

è«‹å…ˆé–±è®€ä»¥ä¸‹æ–‡ä»¶ï¼š

1. **å®Œæ•´è¦æ ¼æ›¸**: `docs/PTalk-Web-MVP-Plan.md`
   - åŒ…å«å®Œæ•´çš„è¨­è¨ˆç³»çµ±ã€æ¶æ§‹ã€åŠŸèƒ½è¦æ ¼

2. **App è¨­è¨ˆç³»çµ±**: `constants/style.tsx`
   - é¡è‰²ã€åœ“è§’ã€é–“è·å®šç¾©ï¼ˆç¶²é ç‰ˆå¿…é ˆåŒæ­¥ï¼‰

3. **å‹åˆ¥å®šç¾©**: `shared/types/`
   - è©•è«–ã€ç”¨æˆ¶ã€åº—å®¶çš„å‹åˆ¥ï¼ˆç¶²é ç‰ˆå¯è¤‡ç”¨ï¼‰

---

## ğŸš€ é–‹ç™¼éšæ®µè¦åŠƒ

### **éšæ®µ 1: å°ˆæ¡ˆåˆå§‹åŒ–** â±ï¸ 30 åˆ†é˜

**ç›®æ¨™**: å»ºç«‹åŸºç¤å°ˆæ¡ˆçµæ§‹

**ä»»å‹™æ¸…å–®**:
- [ ] åˆå§‹åŒ– Next.js 14 å°ˆæ¡ˆ
- [ ] å®‰è£å¿…è¦ä¾è³´
- [ ] å»ºç«‹ FSD è³‡æ–™å¤¾çµæ§‹
- [ ] è¨­å®š TypeScript é…ç½®
- [ ] è¨­å®š ESLint + Prettier
- [ ] å»ºç«‹ç’°å¢ƒè®Šæ•¸æª”æ¡ˆ

**éœ€è¦åŸ·è¡Œçš„æŒ‡ä»¤**:
```bash
# 1. åˆå§‹åŒ–å°ˆæ¡ˆ
npx create-next-app@latest ptalk-web --typescript --tailwind --app --no-src-dir

# 2. é€²å…¥å°ˆæ¡ˆ
cd ptalk-web

# 3. å®‰è£ä¾è³´
pnpm add clsx swr lucide-react

# 4. å®‰è£é–‹ç™¼ä¾è³´
pnpm add -D @types/node prettier eslint-config-prettier

# 5. å»ºç«‹ FSD çµæ§‹
mkdir -p src/shared/{api,config,lib,types,ui}
mkdir -p src/entities/{comment,venue,user}/{api,ui}
mkdir -p src/features/{download-app,share-preview}/ui
mkdir -p src/widgets/{comment-detail,user-profile}/ui
mkdir -p styles
```

**ç”¢å‡ºæª”æ¡ˆ**:
- `package.json`
- `.env.local`
- `.eslintrc.json`
- `.prettierrc`
- `tsconfig.json`
- åŸºç¤è³‡æ–™å¤¾çµæ§‹

---

### **éšæ®µ 2: è¨­è¨ˆç³»çµ±è¨­å®š** â±ï¸ 45 åˆ†é˜

**ç›®æ¨™**: å»ºç«‹èˆ‡ App ä¸€è‡´çš„è¨­è¨ˆç³»çµ±

**ä»»å‹™æ¸…å–®**:
- [ ] è¨­å®š Tailwind é…ç½®ï¼ˆé¡è‰²ã€åœ“è§’ã€é–“è·ï¼‰
- [ ] å»ºç«‹æ¨£å¼å¸¸æ•¸æª”æ¡ˆ
- [ ] å»ºç«‹åŸºç¤ UI å…ƒä»¶ï¼ˆButton, Imageï¼‰
- [ ] æ¸¬è©¦è¨­è¨ˆç³»çµ±

**é‡è¦**: å¾ `constants/style.tsx` åŒæ­¥æ‰€æœ‰è¨­è¨ˆ token

**ç”¢å‡ºæª”æ¡ˆ**:
- `tailwind.config.js` â† åŒ…å«å®Œæ•´è¨­è¨ˆç³»çµ±
- `styles/colors.ts`
- `styles/spacing.ts`
- `styles/radius.ts`
- `styles/shadows.ts`
- `src/shared/ui/Button/Button.tsx`
- `src/shared/ui/Image/Image.tsx`

**é©—è­‰æ–¹å¼**:
```typescript
// æ¸¬è©¦ï¼šé¡è‰²æ˜¯å¦æ­£ç¢º
const testColor = '#2196F3'; // App çš„ blueText
// Tailwind: className="text-primary" æ‡‰è©²é¡¯ç¤ºç›¸åŒé¡è‰²
```

---

### **éšæ®µ 3: API å±¤å»ºç«‹** â±ï¸ 30 åˆ†é˜

**ç›®æ¨™**: å»ºç«‹ API Client å’Œå‹åˆ¥å®šç¾©

**ä»»å‹™æ¸…å–®**:
- [ ] å»ºç«‹ Fetch API Wrapper
- [ ] å¾ App è¤‡è£½å‹åˆ¥å®šç¾©ï¼ˆComment, User, Venueï¼‰
- [ ] å»ºç«‹ API ç«¯é»å‡½æ•¸
- [ ] éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

**ç”¢å‡ºæª”æ¡ˆ**:
- `src/shared/api/client.ts` â† Fetch wrapper
- `src/shared/types/comment.ts`
- `src/shared/types/user.ts`
- `src/shared/types/venue.ts`
- `src/entities/comment/api/getComment.ts`
- `src/entities/user/api/getUser.ts`

**API ç«¯é»**:
```typescript
GET /api/comments/:id              // å–å¾—è©•è«–è©³ç´°
GET /api/comments/:id/related      // å–å¾—ç›¸é—œè©•è«–
GET /api/users/:id                 // å–å¾—ç”¨æˆ¶è³‡æ–™
GET /api/users/:id/comments        // å–å¾—ç”¨æˆ¶è©•è«–åˆ—è¡¨
```

---

### **éšæ®µ 4: æ ¸å¿ƒå…ƒä»¶é–‹ç™¼** â±ï¸ 2 å°æ™‚

**ç›®æ¨™**: é–‹ç™¼å¯é‡ç”¨çš„ UI å…ƒä»¶

**é–‹ç™¼é †åº**:
1. æœ€åº•å±¤å…ƒä»¶ï¼ˆentitiesï¼‰
2. çµ„åˆå…ƒä»¶
3. åŠŸèƒ½å…ƒä»¶ï¼ˆfeaturesï¼‰

**ä»»å‹™æ¸…å–®**:

**4.1 Entities å±¤**
- [ ] `UserAvatar` - ç”¨æˆ¶é ­åƒ
- [ ] `RatingDisplay` - è©•åˆ†é¡¯ç¤ºï¼ˆæŠ“æŠ“/ä¾¿ä¾¿ï¼‰
- [ ] `CommentImages` - è©•è«–åœ–ç‰‡ç¶²æ ¼
- [ ] `VenueInfo` - åº—å®¶è³‡è¨Šå¡ç‰‡

**4.2 çµ„åˆå…ƒä»¶**
- [ ] `CommentCard` - è©•è«–å¡ç‰‡ï¼ˆçµ„åˆä»¥ä¸Šå…ƒä»¶ï¼‰

**4.3 Features å±¤**
- [ ] `DownloadBanner` - é ‚éƒ¨æµ®å‹•æŒ‰éˆ•
- [ ] `DownloadCTA` - åº•éƒ¨ä¸‹è¼‰å€å¡Š

**è¨­è¨ˆè¦æ±‚**:
- âœ… å¿…é ˆç¬¦åˆè¨­è¨ˆç³»çµ±
- âœ… æ”¯æ´ RWDï¼ˆæ‰‹æ©Ÿã€å¹³æ¿ã€æ¡Œé¢ï¼‰
- âœ… åœ–ç‰‡ä½¿ç”¨ `next/image` å„ªåŒ–
- âœ… åŒ…å« Loading ç‹€æ…‹

**ç”¢å‡ºæª”æ¡ˆ**:
```
src/entities/
â”œâ”€â”€ user/ui/
â”‚   â””â”€â”€ UserAvatar.tsx
â”œâ”€â”€ comment/ui/
â”‚   â”œâ”€â”€ RatingDisplay.tsx
â”‚   â”œâ”€â”€ CommentImages.tsx
â”‚   â””â”€â”€ CommentCard.tsx
â””â”€â”€ venue/ui/
    â””â”€â”€ VenueInfo.tsx

src/features/download-app/ui/
â”œâ”€â”€ DownloadBanner.tsx
â”œâ”€â”€ DownloadCTA.tsx
â””â”€â”€ DownloadButton.tsx
```

---

### **éšæ®µ 5: é é¢é–‹ç™¼** â±ï¸ 2 å°æ™‚

**ç›®æ¨™**: é–‹ç™¼å…©å€‹ä¸»è¦é é¢

**ä»»å‹™æ¸…å–®**:

**5.1 è©•è«–è©³ç´°é ** (`/r/[id]`)
- [ ] Server Component å¯¦ä½œ
- [ ] Metadata / Open Graph è¨­å®š
- [ ] çµ„åˆæ‰€æœ‰å…ƒä»¶
- [ ] Loading å’Œ Error ç‹€æ…‹

**5.2 ç”¨æˆ¶æª”æ¡ˆé ** (`/u/[id]`)
- [ ] Server Component å¯¦ä½œ
- [ ] Metadata è¨­å®š
- [ ] è©•è«–åˆ—è¡¨é¡¯ç¤º
- [ ] ã€ŒæŸ¥çœ‹å…¨éƒ¨ã€æç¤ºä¸‹è¼‰

**5.3 Root Layout**
- [ ] çµ±ä¸€çš„é é¢çµæ§‹
- [ ] Google Analyticsï¼ˆå¯é¸ï¼‰
- [ ] Meta Tags

**ç”¢å‡ºæª”æ¡ˆ**:
```
src/app/
â”œâ”€â”€ layout.tsx              # Root Layout
â”œâ”€â”€ page.tsx                # é¦–é ï¼ˆé‡å®šå‘ï¼‰
â”œâ”€â”€ r/[id]/
â”‚   â”œâ”€â”€ page.tsx           # è©•è«–è©³ç´°é 
â”‚   â””â”€â”€ loading.tsx        # Loading ç‹€æ…‹
â””â”€â”€ u/[id]/
    â”œâ”€â”€ page.tsx           # ç”¨æˆ¶æª”æ¡ˆé 
    â””â”€â”€ loading.tsx
```

**é é¢çµæ§‹ç¯„ä¾‹**:
```typescript
// app/r/[id]/page.tsx
export async function generateMetadata({ params }): Promise<Metadata> {
  const comment = await getComment(params.id);
  return {
    title: `${comment.user.name} åœ¨ ${comment.venue.name} çš„è©•åƒ¹`,
    openGraph: {
      images: [comment.images[0]],
    },
  };
}

export default async function CommentDetailPage({ params }) {
  const comment = await getComment(params.id);
  const relatedComments = await getRelatedComments(params.id, 5);

  return <CommentDetailView comment={comment} related={relatedComments} />;
}
```

---

### **éšæ®µ 6: Deep Link åŠŸèƒ½** â±ï¸ 1 å°æ™‚

**ç›®æ¨™**: å¯¦ä½œ App é–‹å•Ÿå’Œä¸‹è¼‰å°å‘

**ä»»å‹™æ¸…å–®**:
- [ ] è£ç½®åµæ¸¬ï¼ˆiOS / Android / Desktopï¼‰
- [ ] Deep Link é‚è¼¯ï¼ˆé–‹å•Ÿ Appï¼‰
- [ ] Fallback é‚è¼¯ï¼ˆå°å‘å•†åº—ï¼‰
- [ ] æ•´åˆåˆ° Download æŒ‰éˆ•

**ç”¢å‡ºæª”æ¡ˆ**:
```
src/shared/lib/
â”œâ”€â”€ deeplink.ts           # Deep Link æ ¸å¿ƒé‚è¼¯
â””â”€â”€ device.ts             # è£ç½®åµæ¸¬
```

**åŠŸèƒ½é‚è¼¯**:
```typescript
é»æ“Šã€Œé–‹å•Ÿ Appã€
  â†“
åµæ¸¬è£ç½®é¡å‹
  â†“
å˜—è©¦é–‹å•Ÿ: ptalk://r/comment123
  â†“
2 ç§’å¾Œæª¢æŸ¥ï¼š
  - é‚„åœ¨ç¶²é  â†’ æ²’å®‰è£ â†’ å°å‘å•†åº—
  - å·²é›¢é–‹ â†’ æˆåŠŸé–‹å•Ÿ App âœ…
```

---

### **éšæ®µ 7: æ¸¬è©¦èˆ‡å„ªåŒ–** â±ï¸ 1 å°æ™‚

**ç›®æ¨™**: ç¢ºä¿å“è³ªå’Œæ•ˆèƒ½

**ä»»å‹™æ¸…å–®**:
- [ ] å„è£ç½®æ¸¬è©¦ï¼ˆiOS, Android, Desktopï¼‰
- [ ] Lighthouse æ•ˆèƒ½æ¸¬è©¦ï¼ˆç›®æ¨™ > 90ï¼‰
- [ ] Open Graph é è¦½æ¸¬è©¦
- [ ] åœ–ç‰‡è¼‰å…¥å„ªåŒ–
- [ ] Error Boundary è¨­å®š

**æ¸¬è©¦æª¢æŸ¥æ¸…å–®**:
```
æ•ˆèƒ½:
â–¡ Lighthouse Performance > 90
â–¡ First Contentful Paint < 1.8s
â–¡ Largest Contentful Paint < 2.5s

åŠŸèƒ½:
â–¡ Deep Link é‹ä½œï¼ˆiOSï¼‰
â–¡ Deep Link é‹ä½œï¼ˆAndroidï¼‰
â–¡ åœ–ç‰‡æ­£ç¢ºè¼‰å…¥
â–¡ è©•è«–é é¢æ­£ç¢ºé¡¯ç¤º
â–¡ ç”¨æˆ¶é é¢æ­£ç¢ºé¡¯ç¤º

SEO:
â–¡ Meta Tags æ­£ç¢º
â–¡ Open Graph åœ–ç‰‡é¡¯ç¤º
â–¡ Sitemap ç”Ÿæˆ

ç›¸å®¹æ€§:
â–¡ iPhone Safari
â–¡ Android Chrome
â–¡ Desktop Chrome
â–¡ Desktop Safari
```

---

## ğŸ¯ çµ¦ AI åŠ©æ‰‹çš„å·¥ä½œæŒ‡ç¤º

### **å¦‚ä½•èˆ‡æˆ‘å”ä½œ**

**ç¬¬ä¸€æ¬¡å°è©±æ™‚**:
```
ä½¿ç”¨è€…æœƒèªªï¼šã€Œé–‹å§‹éšæ®µ Xã€

ä½ æ‡‰è©²ï¼š
1. é–±è®€è©²éšæ®µçš„ä»»å‹™æ¸…å–®
2. è©¢å•æ˜¯å¦éœ€è¦ç”Ÿæˆæ‰€æœ‰æª”æ¡ˆï¼Œæˆ–é€å€‹ç”Ÿæˆ
3. ç¢ºèª API ç«¯é»å’Œç’°å¢ƒè®Šæ•¸
4. é–‹å§‹ç”Ÿæˆç¨‹å¼ç¢¼
```

**ç”Ÿæˆç¨‹å¼ç¢¼æ™‚**:
- âœ… ä¸€æ¬¡ç”Ÿæˆä¸€å€‹å®Œæ•´æª”æ¡ˆï¼ˆåŒ…å«æ‰€æœ‰ importsï¼‰
- âœ… åŠ ä¸Šæª”æ¡ˆè·¯å¾‘è¨»è§£
- âœ… åŒ…å« TypeScript å‹åˆ¥
- âœ… éµå¾ªè¨­è¨ˆç³»çµ±ï¼ˆå¾ `constants/style.tsx`ï¼‰
- âœ… ä½¿ç”¨ TailwindCSS class

**å®Œæˆæ¯å€‹éšæ®µå¾Œ**:
- âœ… æä¾›æª¢æŸ¥æ¸…å–®
- âœ… èªªæ˜ä¸‹ä¸€æ­¥
- âœ… è©¢å•æ˜¯å¦æœ‰å•é¡Œ

---

## ğŸ“ é‡è¦æé†’

### **è¨­è¨ˆç³»çµ±å„ªå…ˆ**
```
æ‰€æœ‰é¡è‰²ã€åœ“è§’ã€é–“è·éƒ½å¿…é ˆå¾ App çš„ constants/style.tsx åŒæ­¥
ä¸å¯ä»¥è‡ªå·±å®šç¾©æ–°çš„é¡è‰²æˆ–å°ºå¯¸ï¼
```

### **æ¥µç°¡åŸå‰‡**
```
åªåšå…©å€‹é é¢ï¼š
1. è©•è«–è©³ç´°é  (/r/[id])
2. ç”¨æˆ¶æª”æ¡ˆé  (/u/[id])

ä¸è¦åšï¼š
âŒ é¦–é 
âŒ æœå°‹åŠŸèƒ½
âŒ åº—å®¶å®Œæ•´é é¢
âŒ ç¯©é¸åŠŸèƒ½
```

### **å…§å®¹é™åˆ¶ç­–ç•¥**
```
âœ… å®Œæ•´é¡¯ç¤ºè©²å‰‡è©•è«–
âœ… é¡¯ç¤º 3-5 å‰‡å…¶ä»–è©•è«–
âŒ ä¸é¡¯ç¤ºå…¨éƒ¨è©•è«–
â†’ å¼•å°ä¸‹è¼‰ App æŸ¥çœ‹æ›´å¤š
```

---

## ğŸš¦ é–‹å§‹é–‹ç™¼

### **ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–å°ˆæ¡ˆ**

å‘Šè¨´ AI åŠ©æ‰‹ï¼š
```
ã€Œé–‹å§‹éšæ®µ 1ï¼šå°ˆæ¡ˆåˆå§‹åŒ–
è«‹å¹«æˆ‘ç”Ÿæˆæ‰€æœ‰å¿…è¦çš„é…ç½®æª”æ¡ˆã€
```

### **æª¢æŸ¥é»**

æ¯å®Œæˆä¸€å€‹éšæ®µï¼Œç¢ºèªï¼š
- [ ] æ‰€æœ‰æª”æ¡ˆéƒ½å·²ç”Ÿæˆ
- [ ] æ²’æœ‰ TypeScript éŒ¯èª¤
- [ ] æ²’æœ‰ ESLint éŒ¯èª¤
- [ ] å¯ä»¥æˆåŠŸåŸ·è¡Œ `pnpm dev`

---

## ğŸ“ éœ€è¦å”åŠ©æ™‚

**é‡åˆ°å•é¡Œæ™‚å‘Šè¨´ AI**:
- ã€Œé€™å€‹å…ƒä»¶æ¨£å¼ä¸å°ï¼Œæ‡‰è©²è¦...ã€
- ã€ŒAPI å›å‚³æ ¼å¼ä¸ä¸€æ¨£ï¼Œæ˜¯...ã€
- ã€Œå¯ä»¥å¹«æˆ‘èª¿æ•´ XXX å—ï¼Ÿã€

**é€²åº¦è¿½è¹¤**:
- ã€Œç›®å‰å®Œæˆåˆ°å“ªå€‹éšæ®µï¼Ÿã€
- ã€Œæ¥ä¸‹ä¾†è¦åšä»€éº¼ï¼Ÿã€
- ã€Œé‚„å‰©ä¸‹å“ªäº›ä»»å‹™ï¼Ÿã€

---

## âœ… æœ€çµ‚äº¤ä»˜ç‰©

å®Œæˆæ‰€æœ‰éšæ®µå¾Œï¼Œä½ æœƒæœ‰ï¼š

```
ptalk-web/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # 2 å€‹é é¢
â”‚   â”œâ”€â”€ shared/                 # è¨­è¨ˆç³»çµ±ã€API
â”‚   â”œâ”€â”€ entities/               # æ ¸å¿ƒå…ƒä»¶
â”‚   â”œâ”€â”€ features/               # åŠŸèƒ½å…ƒä»¶
â”‚   â””â”€â”€ widgets/                # é é¢çµ„åˆ
â”œâ”€â”€ public/                     # åœ–ç‰‡è³‡æº
â”œâ”€â”€ styles/                     # å…¨åŸŸæ¨£å¼
â””â”€â”€ æ‰€æœ‰é…ç½®æª”æ¡ˆ

åŠŸèƒ½ï¼š
âœ… è©•è«–è©³ç´°é ï¼ˆå®Œæ•´ï¼‰
âœ… ç”¨æˆ¶æª”æ¡ˆé ï¼ˆå®Œæ•´ï¼‰
âœ… Deep Link åŠŸèƒ½
âœ… Open Graph åˆ†äº«é è¦½
âœ… RWD éŸ¿æ‡‰å¼
âœ… è¨­è¨ˆç³»çµ±èˆ‡ App ä¸€è‡´
```

**éƒ¨ç½²åˆ° Vercel å³å¯ä¸Šç·šï¼** ğŸš€

---

## ğŸ¯ æˆåŠŸæ¨™æº–

- [ ] ç¶²é ç‰ˆçœ‹èµ·ä¾†å’Œ App ä¸€æ¨¡ä¸€æ¨£
- [ ] å¯ä»¥åˆ†äº«è©•è«–é€£çµçµ¦æœ‹å‹
- [ ] æœ‹å‹é»é–‹å¯ä»¥çœ‹åˆ°å®Œæ•´è©•è«–
- [ ] æœ‰æ˜ç¢ºçš„ä¸‹è¼‰ CTA
- [ ] Deep Link å¯ä»¥é–‹å•Ÿ App
- [ ] Lighthouse åˆ†æ•¸ > 90

---

æº–å‚™å¥½äº†å—ï¼Ÿå‘Šè¨´ AI åŠ©æ‰‹ï¼šã€Œé–‹å§‹éšæ®µ 1ã€ğŸš€
